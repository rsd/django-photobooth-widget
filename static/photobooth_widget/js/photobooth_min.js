/**
*
* Photobooth.js version 0.7-rsd2
*
* build Tue Aug 13 2019 23:20:52 GMT-0300 (Brasilia Standard Time)
*
* CSS
*/
window.addEventListener("load",function(){var s = document.createElement("style"); s.innerHTML=".photobooth{position:relative;font:11px arial,sans-serif;overflow:hidden;user-select:none;-webkit-user-select:none;-moz-user-select:none;-o-user-select:none}.photobooth canvas{position:absolute;left:0;top:0}.photobooth .blind{position:absolute;left:0;top:0;opacity:0;width:100%;height:100%;background:#fff;z-index:1}.photobooth .blind.anim{transition:opacity 1500ms ease-out;-o-transition:opacity 1500ms ease-out;-moz-transition:opacity 1500ms ease-out;-webkit-transition:opacity 1500ms ease-out}.photobooth .warning{position:absolute;top:45%;background:#ffebeb;color:#cf0000;border:1px solid #cf0000;width:60%;left:50%;margin-left:-30%;display:none;padding:5px;z-index:10;text-align:center}.photobooth .warning span{text-decoration:underline;cursor:pointer;color:#333}.photobooth ul{width:30px;position:absolute;right:0;top:0;background:rgba( 0,0,0,.6 );height:230px;z-index:2;border-bottom-left-radius:5px;list-style:none;padding-left:0}.photobooth ul li{width:30px;height:38px;background-repeat:no-repeat;background-position:center center;cursor:pointer;position:relative}.photobooth ul li:hover{background-color:#aaa}.photobooth ul li.selected{background-color:#ccc}.photobooth ul.noHSB{height:120px}.photobooth ul.noFlip{height:190px}.photobooth ul.noHSB.noFlip{height:80px}.photobooth ul.noFlip li.flip,.photobooth ul.noHSB li.hue,.photobooth ul.noHSB li.saturation,.photobooth ul.noHSB li.brightness{display:none}.photobooth ul li.flip{background-image:url(data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAWCAYAAADTlvzyAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAC4jAAAuIwF4pT92AAADyUlEQVRIx71Vz2ujVRQ95+WHaG0bWlCEcaHV7vyxsD8ogjSkiaIdmIUyigPiILhQRN2I8xc4UBU3IqjoxhlUrAsXbdPQlNGFLYOBbmutI64KbUem7aTJd4+LvJe+fKMuvavk+953z733nHMfFxYWcmYmSSIJAHTOEQAkqVgs3pvL5TYA9OG/46DZbD5cr9evSYKZKZPJdBL6vEmSWFaSAMgDwDmHAAYA2Wz2eQB/ttvtl0lCgjrf90Ymk/kin8+fBXDRzBTyBDAz6+QLQP4l2TkRChDJ05K+qdVqP3cA1T0vSWEa5XL5a4Cnzey9CAgAGJqSBLbb7WdJ3n0CTEXn8yTnkiQZW15ebgRAAEiSRM65UCSmp6cfzeVy65LeBNDyQAQgkvLgO6HVTQB/paYkAATw2+Li4tlQgSQkSSKSCN2RpCRVKpXLAO7rnIN6G8UAgAdoZjKzM9Vq9YcwijA2T3zIGYiXrzqmAL7wztjIIDz5XKpUKrMk57NxS/HIzKyr2vC6VCo945w7B2AUwG0Srkk2v7+//+Xa2trhyMiI29zctBjM54IvBNm02kgyjCzMY3x8/M5CoXCJ5BMAvpL0gaQ2yVHn3IWhoaHXK5XKxyTf2NraejCyWADqCjENyHg0zjn09fWxUCh8S/JUq9V6qFqtbpOk95gmJiYuDg4OfkLyfQC7KYX2WAwAXNyZf67YP1NTU+dIjh8fHz9Zq9W2AcA5103S39//tKSfANxIgXSp8Z7kLT6MFwC74V6U9OnKysofZhYrE2NjY3c4594GkAfwO4Dt0J2nxtLdZmNz+kDowhfQNLPvzawr1RBra2uHACbSnow3S/jvPdkBjPN47roPlpYWZ0PHXgw9uEHNMzMz485l3qpWl174t3UZd6g0WEhaLlcukbjfn7u5t7f31Pr6+mG0suCXwBlAd6U5PKGGvSoN38b7sdMZigCcpAsAbjQajcOYAgAoFov3kHzFzN7t4eWk8FtVGi3rHk/6nwWSj+3u7n7XarUY5UOpVDqVz+fnJW00Go3PQqFpatIj7ZFvRLQAHEr6kOT54eHhjVJp5nNAvwC83Tk+DuAlSVcPDg6e29nZsX/SQai/BzCScwCDJB0dHT2yurp6fXJy8qOBgYFXnXOzAN8BcADgqpm9duXKj5ebzZvxldYjsNjfXZVGe5PxgqjX69cB0FtgTtKcJAVPhm9j2iR1b/toZIo5DFs+fKyUTXqIT+/HOKKln16XPRyOlsvlyXABh/Nx5RIQpu6BFN8kvgiFaaYvYJKjAX0TwAj+n/j1b3e/jAKG43odAAAAAElFTkSuQmCC)}.photobooth ul li.hue{background-image:url(data:image/jpeg;base64,/9j/4AAQSkZJRgABAgAAZABkAAD/7AARRHVja3kAAQAEAAAAZAAA/+4ADkFkb2JlAGTAAAAAAf/bAIQAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQICAgICAgICAgICAwMDAwMDAwMDAwEBAQEBAQECAQECAgIBAgIDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMD/8AAEQgACAAYAwERAAIRAQMRAf/EAHgAAQEAAAAAAAAAAAAAAAAAAAkIAQEAAwAAAAAAAAAAAAAAAAAKBggLEAAAAwQLAAAAAAAAAAAAAAAAMQZBAjQ4A3MEdMQFdQcICTkRAAEBBAcGBwAAAAAAAAAAABExAAEhElECMjMEBQlhwgNzFDgVNRY3CBgK/9oADAMBAAIRAxEAPwBGOKPmqmNdT5FD2YgarLO67OVueIqrxF2tI/1Kn0jjjKfFcJZEt+5BAUCAaKuw+ThT3vC0wbFof+U4Dnv3WGl8Pu47A8vecwabKy8ZRVNKFdF3dY72fztbVdFu67axelcfrPkYlPTutCW7qqYCkwDf/9k=)}.photobooth ul li.saturation{background-image:url(data:image/jpeg;base64,/9j/4AAQSkZJRgABAgAAZABkAAD/7AARRHVja3kAAQAEAAAAZAAA/+4ADkFkb2JlAGTAAAAAAf/bAIQAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQICAgICAgICAgICAwMDAwMDAwMDAwEBAQEBAQECAQECAgIBAgIDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMD/8AAEQgACAAYAwERAAIRAQMRAf/EAGMAAAMAAAAAAAAAAAAAAAAAAAYICQEBAQEAAAAAAAAAAAAAAAAACAkKEAAABgMBAAAAAAAAAAAAAAAAwYIDMwZxAkQHEQABAgUFAAAAAAAAAAAAAAAAAQYxgQIyM3HBQgMH/9oADAMBAAIRAxEAPwAwo0rWdSFXHBYpnLZmWjVB/fLedIODu5Do81j1y2KE0CJlJA2uK5ZjtY2Kg//Z)}.photobooth ul li.brightness{background-image:url(data:image/jpeg;base64,/9j/4AAQSkZJRgABAgAAZABkAAD/7AARRHVja3kAAQAEAAAAZAAA/+4ADkFkb2JlAGTAAAAAAf/bAIQAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQICAgICAgICAgICAwMDAwMDAwMDAwEBAQEBAQECAQECAgIBAgIDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMD/8AAEQgACAAYAwERAAIRAQMRAf/EAFcAAQAAAAAAAAAAAAAAAAAAAAoBAQAAAAAAAAAAAAAAAAAAAAAQAAAEBQUAAAAAAAAAAAAAAACxAwgBMXECBXJzBDQ1EQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwAcTWfR4GtIwC5mITxNUDgAYA0joY3aRKwB/9k=)}.photobooth ul li.crop{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAICAYAAADjoT9jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAEFJREFUeNpi/A8EDAjACMT/qUgzMCJZwMhAXQA2l4VGhsPNZKKR4XBfMMG8QiPASDcf0MIX/2FxgCJARRoMAAIMAK49Iv4yTUj5AAAAAElFTkSuQmCC)}.photobooth ul li.trigger{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAASCAYAAABB7B6eAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAa9JREFUeNqc1M8rRFEUwPF5M4MhP8aPIiIS21lQk1Is5ceChZIdOytlI/+A7Ig/gGRhpYiNbKQsrBRFLPzYWJghNH7MjOd76qhr8m6vOfWpmffevefec987juu6AZ8RQhhBpJHJuT+CfsiEDo6wGjYeKMKn8b8Um/jCG2qQ0skjyOIWB9hFNyaN8bWSwGEHM5q9EVc6mUQ9YpjDHQbwoQkjuspDDKNEF9hjJDjFcoAEx653XEoJMYoVxNGBGPZRhzbL+HTYWLEtpO6V6EQ5kijTc7HFiwyssDwgyXsxhW8tkZSxAAksoj3n7P4G20hatviKE3RpqXKN4V5K4TE+IQ89WBI8ao0DFkP49krw+057xbyWxBY72LIdXsbjnlzf8/kRbtgSeO1APqonnwlu8tlBIYp9JojmkyCiX7Kf6MsngcSsvvO2aMZEPmcgEcea7ua/aNKGaC2RY0lwgTNsYwwNOlkrprGOJe2q/84vvegabdrrQyqomrSTyirHtbPKc+84x4L2qBazORi/s9KuC7QfBY3JC1UVBlGt16PallPap+Tas+7wWc8za1Ql8yPAAAzkXGo1lmDtAAAAAElFTkSuQmCC)}.photobooth .submenu{background:rgba( 0,0,0,.6 );position:absolute;width:100px;opacity:0;height:20px;padding:5px 10px;color:#fff;top:4px;left:-124px;border-radius:5px;-webkit-transition:opacity 500ms ease;-moz-transition:opacity 500ms ease;-o-transition:opacity 500ms ease;-msie-transition:opacity 500ms ease;transition:opacity 500ms ease}.photobooth li:hover .submenu{opacity:1}.photobooth .submenu .tip{width:4px;height:8px;position:absolute;right:-4px;top:50%;margin-top:-2px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAICAYAAADeM14FAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAADVJREFUeNpiYGBgmAnEDP///wdjJgYImMnIyAhmwATggowwLTCArAKrQDqyQDrcMGQlAAEGAAGOCdflbyWyAAAAAElFTkSuQmCC)}.photobooth .submenu .slider{width:100px;height:20px;position:relative}.photobooth .submenu .slider .track{height:2px;width:100px;position:absolute;top:9px;background:rgba(255,255,255,.6)}.photobooth .submenu .slider .handle{height:14px;width:2px;position:absolute;top:3px;background:#fff;z-index:2}.photobooth .submenu .slider .handle div{position:absolute;z-index:3;width:20px;top:-3px;height:20px;cursor:w-resize;left:-9px}.resizehandle{position:absolute;z-index:1;width:100px;height:100px;left:30px;top:30px;cursor:move;outline:1500px solid rgba( 0,0,0,.35 );box-shadow:2px 2px 10px rgba(0,0,0,.5),0 0 3px #000;opacity:0;transition:opacity 500ms ease;-moz-transition:opacity 500ms ease;-o-transition:opacity 500ms ease;-webkit-transition:opacity 500ms ease}noindex:-o-prefocus,.resizehandle{outline:0!important}@-moz-document url-prefix(){.resizehandle{ box-shadow:none!important}}.resizehandle .handle{width:100%;height:100%;border:2px dashed #0da4d3;margin:-2px 0 0 -2px;z-index:3;position:relative}.resizehandle .handle div{width:18px;height:18px;position:absolute;right:-2px;bottom:-2px;z-index:4;cursor:se-resize;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAYAAAA71pVKAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAHdJREFUeNpi/P//PwO5gIlcjXxLr/xnIlujsg7pNsM0AgEjE7kaSfIzusZ/d4n0M1aNxPgZWeMHC4RGIJuREV8847IRpBGvnwlpxBnPRGkEyYOcjYx5l1z+z3/8Pwij8NHlQWwUPxNrI4afSdUI9zNZGoF8gAADAOGvmx/e+CgVAAAAAElFTkSuQmCC);background-position:top left;background-repeat:no-repeat}"; document.head.appendChild(s);},false);
/**
* JS
*/
Photobooth=function(t){t.length&&(t=t[0]);var e=navigator.mediaDevices.getUserMedia||navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.oGetUserMedia||navigator.msieGetUserMedia||!1;this.onImage=function(){},this.getHueOffset=function(){return o},this.setHueOffset=function(t){f(t,"hue")&&(o=t)},this.getBrightnessOffset=function(){return r},this.setBrightnessOffset=function(t){f(t,"brightness")&&(r=t)},this.getSaturationOffset=function(){return a},this.setSaturationOffset=function(t){f(t,"saturation")&&(a=t)},this.setCrop=function(){L.toggle(),"crop"===S.className?S.className="crop selected":S.className="crop"},this.crop=function(t,e,i,n){L.cropMove(t,e),L.cropResize(i,n)},this.pause=function(){!1===h&&(h=!0,l&&l.stop?l.stop():l.getTracks().forEach(t=>t.stop()))},this.resume=function(){!0===h&&(h=!1,k())},this.destroy=function(){this.pause(),t.removeChild(y)},this.forceHSB=!0,this.flipCammera=!0,this.mimeType="image/png",this.quality=1,this.isSupported=!!e,this.resize=function(t,e){if(0==e&&(e=E.videoHeight/(E.videoWidth/t),isNaN(e)&&(e=t/(4/3))),t<200||e<200)throw"Error: Not enough space for Photobooth. Min height / width is 200 px";u=t,p=e,L.setMax(u,p),y.style.width=t+"px",y.style.height=e+"px",w.width=t,w.height=e,x.width=t,x.height=e,E.width=t,E.height=e},this.capture=function(){B.className="blind",B.style.opacity=1,setTimeout(function(){B.className="blind anim",B.style.opacity=0},50);var t={};t=L.isActive()?L.getData():c?{x:(u-E.videoWidth)/2,y:(p-E.videoHeight)/2,width:E.videoWidth,height:E.videoHeight}:{x:0,y:0,width:u,height:p};var e=g("canvas");if(e.width=t.width,e.height=t.height,c)e.getContext("2d").drawImage(E,Math.max(0,t.x-(u-E.videoWidth)/2),Math.max(t.y-(p-E.videoHeight)/2),t.width,t.height,0,0,t.width,t.height);else{var i=M.getImageData(t.x,t.y,t.width,t.height);e.getContext("2d").putImageData(i,0,0)}d.onImage(e.toDataURL(d.mimeType,d.quality))};var i=function(t){t.stopPropagation(),t.cancelBubble=!0},n=function(t){this.startX=0,this.startY=0,t.addEventListener("mousedown",this,!1)};n.prototype.onStart=function(t,e){},n.prototype.onMove=function(t,e){},n.prototype.onStop=function(t,e){},n.prototype.handleEvent=function(t){this["fon"+t.type](t)},n.prototype.fonmousedown=function(t){t.preventDefault(),this.startX=t.clientX,this.startY=t.clientY,this.onStart(this.startX,this.startY),document.addEventListener("mousemove",this,!1),document.addEventListener("mouseup",this,!1)},n.prototype.fonmousemove=function(t){this.onMove(t.clientX-this.startX,t.clientY-this.startY)},n.prototype.fonmouseup=function(t){this.onStop(t.clientX-this.startX,t.clientY-this.startY),document.removeEventListener("mousemove",this),document.removeEventListener("mouseup",this)};var s=function(t,e){t.innerHTML='<div class="submenu"><div class="tip"></div><div class="slider"><div class="track"></div><div class="handle" style="left:50px"><div></div></div></div></div>';var s=50,o=50,a=t.getElementsByClassName("handle")[0],r=t.getElementsByClassName("slider")[0],c=new n(a);c.onMove=function(t){h(s+t)},c.onStop=function(t){s=o};var h=function(t){t>0&&t<100&&(o=t,a.style.left=t+"px",e((t-50)/100))};r.addEventListener("click",function(t){h(t.layerX),s=o},!1),a.addEventListener("click",i,!1)},o=0,a=0,r=0,c=!1,h=!1,l=null,d=this,u=0===t.offsetWidth?$(t).width():t.offsetWidth,p=0===t.offsetHeight?$(t).height():t.offsetHeight,f=function(t,e){if(t<-.5||t>.5)throw"Invalid value: "+e+" must be between 0 and 1";return!0},v=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)},m=function(t){return y.getElementsByClassName(t)[0]},g=function(t){return document.createElement(t)},y=g("div");y.className="photobooth",y.innerHTML='<div class="blind"></div><canvas></canvas><div class="warning notSupported">Sorry, Photobooth.js is not supported by your browser</div><div class="warning noWebcam">Please give Photobooth permission to use your Webcam. <span>Try again</span></div><ul><li title="flip"class="flip"></li><li title="hue"class="hue"></li><li title="saturation"class="saturation"></li><li title="brightness"class="brightness"></li><li title="crop"class="crop"></li><li title="take picture"class="trigger"></li></ul>';var w=g("canvas"),b=w.getContext("2d"),x=y.getElementsByTagName("canvas")[0],M=x.getContext("2d"),E=g("video");E.autoplay=!0;var N=m("noWebcam");N.getElementsByTagName("span")[0].onclick=function(){k()},new s(m("hue"),function(t){o=t}),new s(m("saturation"),function(t){a=t}),new s(m("brightness"),function(t){r=t});var L=new function(t,e,s){this.setMax=function(t,i){e=t,s=i},this.getData=function(){return{x:o,y:a,width:r,height:c}},this.cropMove=function(t,i){t+r<e&&t>0&&(h=t,f.style.left=h+"px"),i+c<s&&i>0&&(l=i,f.style.top=l+"px"),o=h,a=l},this.cropResize=function(t,i){o+t<e&&t>18&&(d=t,f.style.width=d+"px"),a+i<s&&i>18&&(u=i,f.style.height=u+"px"),r=d,c=u},this.isActive=function(){return p},this.toggle=function(){!1===p?(f.style.opacity=1,p=!0):(f.style.opacity=0,p=!1)};var o=30,a=30,r=100,c=100,h=30,l=30,d=100,u=100,p=!1,f=document.createElement("div");f.className="resizehandle",f.innerHTML='<div class="handle"><div></div></div>',t.appendChild(f);var v=f.getElementsByTagName("div")[0],m=new n(v);m.onMove=function(t,i){o+t+r<e&&o+t>0&&(h=o+t,f.style.left=h+"px"),a+i+c<s&&a+i>0&&(l=a+i,f.style.top=l+"px")},m.onStop=function(){o=h,a=l};var g=f.getElementsByTagName("div")[1];g.addEventListener("mousedown",i,!1);var y=new n(g);y.onMove=function(t,i){o+t+r<e&&r+t>18&&(d=r+t,f.style.width=d+"px"),a+i+c<s&&c+i>18&&(u=c+i,f.style.height=u+"px")},y.onStop=function(){r=d,c=u}}(y,u,p),S=m("crop");S.onclick=function(){L.toggle(),"crop"===S.className?S.className="crop selected":S.className="crop"};var B=m("blind");m("trigger").onclick=function(){this.capture()};var H=!1;m("flip").onclick=function(){H=!H,this.pause(),this.resume()};var C=function(t){if(l=t,U(),"object"==typeof E.srcObject)E.srcObject=l,!1===d.forceHSB?(c=!0,y.appendChild(E)):E.addEventListener("canplay",function(){v(R)},!1),E.play();else try{E.src=(window.URL||window.webkitURL).createObjectURL(l),v(R)}catch(t){E.mozSrcObject=l,!1===d.forceHSB?(c=!0,y.appendChild(E)):E.addEventListener("canplay",function(){v(R)},!1),E.play()}},T=function(t){N.style.display="block"},k=function(){var t={video:{facingMode:H?"user":"environment"}};N.style.display="none",navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia(t).then(C).catch(T):e.call(navigator,t,C,T)},U=function(){!1===d.forceHSB&&y.getElementsByTagName("ul")[0].classList.add("noHSB"),!1===d.flipCammera&&y.getElementsByTagName("ul")[0].classList.add("noFlip")},D=function(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t},O=function(t){return t>1?1:t<0?0:t},R=function(){try{b.drawImage(E,0,0,u,p)}catch(t){}for(var t,e=b.getImageData(0,0,u,p),i=e.data,n=0;n<i.length;n+=4){var s,c,l=i[n]/255,d=i[n+1]/255,f=i[n+2]/255,m=Math.max(l,d,f),g=Math.min(l,d,f),y=(m+g)/2;if(m==g)s=c=0;else{var w=m-g;c=y>.5?w/(2-m-g):w/(m+g),m===l&&(s=((d-f)/w+(d<f?6:0))/6),m===d&&(s=((f-l)/w+2)/6),m===f&&(s=((l-d)/w+4)/6)}if(s=(t=s+o)>1?t-1:t<0?1+t:t,c=O(c+a),y=O(y+r),0===c)l=d=f=y;else{var x=y<.5?y*(1+c):y+c-y*c,N=2*y-x;l=D(N,x,s+1/3),d=D(N,x,s),f=D(N,x,s-1/3)}i[n]=255*l,i[n+1]=255*d,i[n+2]=255*f}M.putImageData(e,0,0),!1===h&&v(R)};U(),this.resize(u,p),t.appendChild(y),e?v(k):m("notSupported").style.display="block"};
/**
* jQuery integration. (It's safe to delete this line if you're not using jQuery)
*/
window.jQuery&&($.fn.photobooth=function(){return this.each(function(o,t){var n=new Photobooth(t);$(t).data("photobooth",n),n.onImage=function(o){$(t).trigger("image",o)}})});